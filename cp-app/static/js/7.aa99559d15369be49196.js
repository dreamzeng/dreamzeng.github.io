webpackJsonp([7],{291:function(e,t,a){var r=a(2)(a(309),a(340),null,null,null);e.exports=r.exports},292:function(e,t,a){"use strict";function r(e){return a.i(l.a)({url:"/lottery",method:"get",params:e})}function i(e){return a.i(l.a)({url:"/lottery/add",method:"POST",data:e})}function s(e){return a.i(l.a)({url:"/lottery/update",method:"POST",data:e})}t.a=r,t.b=i,t.c=s;var l=a(109)},309:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(22),i=a.n(r),s=a(292),l=a(311);t.default={name:"lottery",data:function(){return{state:"true",list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20},formParam:{id:void 0,code:"",name:"",pic:"",type:"",display:"1",number:"",sort:""},rules:{code:[{required:!0,message:"请输入彩种识别码",trigger:"change"}],name:[{required:!0,message:"请输入彩种名称",trigger:"blur"}],type:[{required:!0,message:"请输入彩种种类",trigger:"blur"}],number:[{required:!0,message:"请输入最近一期开奖号码",trigger:"blur"}],sort:[{required:!0,message:"请输入排序顺序",trigger:"blur"}]},calendarTypeOptions:null,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建"},uploadApi:"",headers:{},fileList:[]}},created:function(){this.getList(),this.uploadApi=a.i(l.a)();var e=this.$store.getters.token;this.headers={token:e}},methods:{getList:function(){var e=this;this.listLoading=!0,a.i(s.a)(this.listQuery).then(function(t){var a=t.data;e.list=null,e.total=0,1==a.code&&(e.list=a.data&&a.data.list,e.total=a.data&&a.data.total),e.listLoading=!1})},handleFilter:function(){this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleCreate:function(){this.resetFormParam(),this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){this.fileList=[],this.formParam=i()({},e),this.formParam.openTime&&delete this.formParam.openTime,this.formParam.updateTime&&delete this.formParam.updateTime,this.formParam.createTime&&delete this.formParam.createTime,this.formParam.sort=this.formParam.sort+"",this.state=this.formParam.display+"",""!=this.formParam.pic&&this.fileList.push({name:"pic",url:this.formParam.pic}),this.dialogStatus="update",this.dialogFormVisible=!0},create:function(e){var t=this;this.formParam.display=this.state,this.$refs[e].validate(function(e){e&&a.i(s.b)(t.formParam).then(function(e){t.getList();var a=e.data;1==a.code&&(t.dialogFormVisible=!1,t.$notify({title:"成功",message:a.message,type:"success",duration:2e3}))})})},update:function(e){var t=this;this.formParam.display=this.state,""==this.formParam.pic&&this.fileList.length>0&&(this.formParam.pic=this.fileList[0]),this.$refs[e].validate(function(e){e&&a.i(s.c)(t.formParam).then(function(e){t.getList();var a=e.data;1==a.code&&(t.dialogFormVisible=!1,t.$notify({title:"成功",message:a.message,type:"success",duration:2e3}))})})},resetFormParam:function(){this.fileList=[],this.formParam={id:void 0,code:"",name:"",pic:"",type:"",display:"1",number:"",sort:""}},handleRemove:function(e,t){this.fileList=t,this.formParam.pic=""},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,r=e.size/1024/1024<12;return t||a?!!r||(this.$message.error("上传图片大小不能超过 2MB!"),!1):(this.$message.error("上传图片只能是 JPG,PNG 格式!"),!1)},handleChange:function(e,t){if(e.response&&1!=e.response.code){this.$message.error(e.response.msg);var a=t.length-1;return t.splice(a,1),void(this.fileList=t)}e.response&&1==e.response.code&&(this.formParam.pic=e.response.data,t.length>1&&t.splice(0,1))}}}},311:function(e,t,a){"use strict";function r(){return"http://119.29.101.78/upload/image"}t.a=r;var i=a(65),s=(a.n(i),a(110));a.n(s)},340:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("刷新")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:e.handleCreate}},[e._v("添加")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"彩种识别码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"42px",height:"42px",margin:"5px 0"},attrs:{alt:"",src:e.row.pic}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"种类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"是否显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.display?"success":"danger","close-transition":""}},[e._v(e._s(t.row.display))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"最近一期开奖号码",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.number))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"最近一期开奖时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.openTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sort))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.updateTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑\n        ")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.listQuery.page=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"formParam",staticClass:"small-space",attrs:{model:e.formParam,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"彩种识别码",prop:"code"}},[a("el-input",{model:{value:e.formParam.code,callback:function(t){e.formParam.code=t},expression:"formParam.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"彩种名称",prop:"name"}},[a("el-input",{model:{value:e.formParam.name,callback:function(t){e.formParam.name=t},expression:"formParam.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"彩种图标"}},[a("el-upload",{staticClass:"image-uploader",attrs:{action:e.uploadApi,"file-list":e.fileList,headers:e.headers,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUpload,"on-change":e.handleChange,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("只能上传jpg/png文件（上传图片大小不能超过 2MB!）")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"彩种种类",prop:"type"}},[a("el-input",{model:{value:e.formParam.type,callback:function(t){e.formParam.type=t},expression:"formParam.type"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{attrs:{"on-text":"是","off-text":"否","on-value":"true","off-value":"false"},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开奖号码",prop:"number"}},[a("el-input",{model:{value:e.formParam.number,callback:function(t){e.formParam.number=t},expression:"formParam.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{model:{value:e.formParam.sort,callback:function(t){e.formParam.sort=t},expression:"formParam.sort"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.create("formParam")}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("formParam")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});