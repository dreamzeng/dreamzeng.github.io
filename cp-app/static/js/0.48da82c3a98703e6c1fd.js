webpackJsonp([0],{279:function(e,t,a){function n(e){a(323)}var o=a(2)(a(298),a(336),n,"data-v-1c044718",null);e.exports=o.exports},292:function(e,t,a){"use strict";function n(e){return a.i(r.a)({url:"/lottery",method:"get",params:e})}function o(e){return a.i(r.a)({url:"/lottery/add",method:"POST",data:e})}function i(e){return a.i(r.a)({url:"/lottery/update",method:"POST",data:e})}t.a=n,t.b=o,t.c=i;var r=a(109)},293:function(e,t,a){"use strict";function n(e){return a.i(l.a)({url:"/channel/query",method:"get",params:e})}function o(e){return a.i(l.a)({url:"/channel/add",method:"POST",data:e})}function i(e){return a.i(l.a)({url:"/channel/update",method:"POST",data:e})}function r(e){return a.i(l.a)({url:"/channel/delete/"+e,method:"POST"})}t.a=n,t.b=o,t.c=i,t.d=r;var l=a(109)},294:function(e,t,a){"use strict";function n(e){return a.i(s.a)({url:"/article",method:"get",params:e})}function o(e){return a.i(s.a)({url:"/article/add",method:"POST",data:e})}function i(e){return a.i(s.a)({url:"/article/detail/"+e,method:"get"})}function r(e){return a.i(s.a)({url:"/article/update",method:"POST",data:e})}function l(e){return a.i(s.a)({url:"/article/delete/"+e,method:"POST"})}function c(e){return a.i(s.a)({url:"/article/delete_batch/"+e,method:"POST"})}t.a=n,t.e=o,t.d=i,t.f=r,t.b=l,t.c=c;var s=a(109)},297:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(47);a.n(n);t.default={name:"tinymce",props:{id:{type:String,default:"tinymceEditor"},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return["emoticons | removeformat undo redo |  bullist numlist | outdent indent | forecolor | fullscreen code","bold italic blockquote | h2 p  media link | alignleft aligncenter alignright | image"]}},data:function(){return{hasChange:!1,hasInit:!1}},menubar:{default:""},height:{type:Number,required:!1,default:360}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return tinymce.get(t.id).setContent(e)})}},mounted:function(){var e=this,t=this;tinymce.init({selector:"#"+this.id,height:this.height,body_class:"panel-body ",object_resizing:!1,language:"zh_CN",language_url:"/static/tinymce/langs/zh_CN.js",toolbar:this.toolbar,menubar:this.menubar,plugins:"advlist,autolink,code,paste,textcolor, colorpicker,fullscreen,link,lists,media,wordcount, imagetools,watermark,emoticons,image",end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",block_formats:"普通标签=p;小标题=h2;",imagetools_cors_hosts:["wpimg.wallstcn.com","wallstreetcn.com"],imagetools_toolbar:"watermark",default_link_target:"_blank",link_title:!1,images_upload_url:"postAcceptor.php",init_instance_callback:function(a){t.value&&a.setContent(t.value),t.hasInit=!0,a.on("NodeChange Change KeyUp",function(){e.hasChange=!0,e.$emit("input",a.getContent({format:"raw"}))})},images_upload_handler:function(e,o,i,l){l(0);var c=t.$store.getters.token,s=void 0,d=void 0;s=new XMLHttpRequest,s.withCredentials=!1,s.open("POST","http://119.29.101.78/upload/image"),s.onload=function(){var e=void 0;return 200!=s.status?void a.i(n.Message)({message:s.status,type:"error",duration:5e3}):(e=JSON.parse(s.responseText))&&"string"==typeof e.data?(o(e.data),void l(100)):void a.i(n.Message)({message:s.responseText,type:"error",duration:5e3})},s.onerror=function(){var e=r.responseText;try{e=JSON.parse(r.responseText)}catch(e){console.error(e)}console.error(e)},d=new FormData,s.setRequestHeader("token",c),d.append("file",e.blob()),s.send(d)},setup:function(e){e.addButton("h2",{title:"小标题",text:"小标题",onclick:function(){e.execCommand("mceToggleFormat",!1,"h2")},onPostRender:function(){var t=this;e.on("init",function(){e.formatter.formatChanged("h2",function(e){t.active(e)})})}}),e.addButton("p",{title:"正文",text:"正文",onclick:function(){e.execCommand("mceToggleFormat",!1,"p")},onPostRender:function(){var t=this;e.on("init",function(){e.formatter.formatChanged("p",function(e){t.active(e)})})}})}})},destroyed:function(){tinymce.get(this.id).destroy()}}},298:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),o=a.n(n),i=a(333),r=a.n(i),l=a(293),c=a(292),s=a(294);t.default={name:"articleEdit",components:{Tinymce:r.a},data:function(){return{formParam:{id:void 0,title:"",channelCode:"",channelName:"",content:""},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],channelCode:[{required:!0,message:"请选择",trigger:"change"}],channelName:[{required:!0,message:"请输入频道名称",trigger:"blur"}],content:[{required:!0,message:"文章内容",trigger:"blur"}]},channelMap:{parent_code:""},tempChannelCode:"",calendarTypeOptions:null,channelOptions:null,dialogFormVisible:!1}},computed:{isEdit:function(){return this.$route.meta.isEdit}},created:function(){this.lotteryList()},methods:{fetchData:function(){var e=this,t=this.$route.params.id;t&&a.i(s.d)(t).then(function(t){var a=t.data;1==a.code&&(e.formParam=o()({},a.data),e.channelMap.parent_code=a.data.parentCode,e.tempChannelCode=a.data.channelCode)})},lotteryList:function(){var e=this;a.i(c.a)().then(function(t){var a=t.data;if(1==a.code){for(var n=[],o=a.data.list,i=0,r=o.length;i<r;i++)n.push({key:o[i].code,display_name:o[i].name});e.calendarTypeOptions=n,e.calendarTypeOptions.length>0&&(e.channelMap.parent_code=e.calendarTypeOptions[0].key,e.isEdit&&e.fetchData())}})},getChannelOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.channelOptions=[],this.formParam.channelCode="";var n=this;a.i(l.a)(e).then(function(e){var a=e.data;if(1==a.code){for(var o=[],i=a.data.list,r=0,l=i.length;r<l;r++)o.push({key:i[r].code,display_name:i[r].name});n.channelOptions=o,n.channelOptions.length>0&&(n.formParam.channelCode=n.channelOptions[0].key,""!=n.tempChannelCode&&(n.formParam.channelCode=n.tempChannelCode,n.tempChannelCode=""),t())}})},selectChange:function(e){this.getChannelOptions({parent_code:e})},create:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogFormVisible=!0,a.i(s.e)(t.formParam).then(function(e){var a=e.data;1==a.code&&(t.dialogFormVisible=!1,t.$notify({title:"成功",message:a.message,type:"success",duration:2e3}),t.back())}))})},update:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogFormVisible=!0,a.i(s.f)(t.formParam).then(function(e){var a=e.data;1==a.code&&(t.dialogFormVisible=!1,t.$notify({title:"成功",message:a.message,type:"success",duration:2e3}),t.back())}))})},back:function(){this.$router.go(-1)}}}},315:function(e,t,a){t=e.exports=a(276)(!1),t.push([e.i,"",""])},318:function(e,t,a){t=e.exports=a(276)(!1),t.push([e.i,".tinymce-container[data-v-5f50540d]{position:relative}.tinymce-textarea[data-v-5f50540d]{visibility:hidden;z-index:-1}.editor-custom-btn-container[data-v-5f50540d]{position:absolute;right:15px;top:18px}.editor-upload-btn[data-v-5f50540d]{display:inline-block}",""])},323:function(e,t,a){var n=a(315);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(277)("98250144",n,!0)},326:function(e,t,a){var n=a(318);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(277)("8c877e8a",n,!0)},333:function(e,t,a){function n(e){a(326)}var o=a(2)(a(297),a(342),n,"data-v-5f50540d",null);e.exports=o.exports},336:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"components-container"},[a("el-form",{ref:"formParam",staticClass:"small-space",attrs:{model:e.formParam,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.formParam.title,callback:function(t){e.formParam.title=t},expression:"formParam.title"}})],1),e._v(" "),a("el-form-item",{staticClass:"el-form-item-rest",attrs:{label:"频道识别码",prop:"channelCode"}},[a("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"彩种"},on:{change:e.selectChange},model:{value:e.channelMap.parent_code,callback:function(t){e.channelMap.parent_code=t},expression:"channelMap.parent_code"}},e._l(e.calendarTypeOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name+"("+e.key+")",value:e.key}})})),e._v(" "),a("el-select",{staticClass:"filter-item",attrs:{clearable:"",placeholder:"频道识别码"},model:{value:e.formParam.channelCode,callback:function(t){e.formParam.channelCode=t},expression:"formParam.channelCode"}},e._l(e.channelOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name+"("+e.key+")",value:e.key}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"频道名称",prop:"channelName"}},[a("el-input",{model:{value:e.formParam.channelName,callback:function(t){e.formParam.channelName=t},expression:"formParam.channelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文章内容",prop:"content"}},[a("Tinymce",{ref:"editor",attrs:{height:200},model:{value:e.formParam.content,callback:function(t){e.formParam.content=t},expression:"formParam.content"}})],1),e._v(" "),a("el-form-item",[e.isEdit?a("el-button",{attrs:{type:"primary",loading:e.dialogFormVisible},on:{click:function(t){e.update("formParam")}}},[e._v("编辑")]):a("el-button",{attrs:{type:"primary",loading:e.dialogFormVisible},on:{click:function(t){e.create("formParam")}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{loading:e.dialogFormVisible},on:{click:e.back}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]}},342:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tinymce-container editor-container"},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.id}})])},staticRenderFns:[]}}});